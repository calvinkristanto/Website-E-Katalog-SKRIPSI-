<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nasi Kotak I Gusti</title>
  <link rel="icon" href="Foto/icon/icon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="allformakanan.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>
<body>
  <main class="content-container">
    <!-- SLIDER -->
  <div class="slider-container">
  <div class="slider">
   <div class="slide">
  <figure>
    <img src="Foto/Nasi Kotak/Nasi Kotak Gusti/1.jpg" alt="Nasi Kuning Ayam Goreng dan Telur Bali">
    <figcaption>
      Nasi Kuning Ayam Goreng & Telur Bali<br><strong>IDR 15.000</strong>
    </figcaption>
  </figure>
</div>
<div class="slide">
  <figure>
    <img src="Foto/Nasi Kotak/Nasi Kotak Gusti/2.jpg" alt="Nasi Lemak">
    <figcaption>
      Nasi Lemak<br><strong>IDR 20.000</strong>
    </figcaption>
  </figure>
</div>
<div class="slide">
  <figure>
    <img src="Foto/Nasi Kotak/Nasi Kotak Gusti/3.jpg" alt="Nasi Putih Tumpeng">
    <figcaption>
      Nasi Putih Tumpeng <br><strong>IDR 115.000</strong>
    </figcaption>
  </figure>
</div>
<div class="slide">
  <figure>
    <img src="Foto/Nasi Kotak/Nasi Kotak Gusti/4.jpg" alt="Nasi Tumpeng Masakan Bali">
    <figcaption>
      Nasi Tumpeng Masakan Bali <br><strong>IDR 140.000</strong>
    </figcaption>
  </figure>
</div>

  </div>

  <div class="slider-buttons">
    <button class="slider-btn prev">❮</button>
    <button class="slider-btn next">❯</button>
  </div>
</div>




          <!-- INFO TOKO -->
  <section class="info-box" aria-label="Informasi Warung">
    <!-- Jam Operasional -->
    <div class="hours">
      <div class="icons">
        <span class="material-symbols-outlined">calendar_today</span>
        <p>Hari: (Jika ada pesanan)</p>
      </div>
      <div class="icons">
        <span class="material-symbols-outlined">schedule</span>
        <p>Jam: (Jika ada pesanan)</p>
      </div>
    </div>

    <!-- Detail Produk -->
    <div class="description">
      <section class="product-details" aria-label="Detail Produk">
        <!-- Tab Navigasi -->
        <div class="tabs">
          <button class="tab-button active" data-tab="description">Deskripsi</button>
          <button class="tab-button" data-tab="review">Ulasan</button>
          <button class="tab-button" data-tab="shipping">Pengiriman</button>
        </div>

        <!-- Konten Tab: Deskripsi -->
        <div class="tab-content" id="description">
         <strong>Nasi Kotak Gusti</strong> menyajikan pilihan nasi kotak dan tumpeng yang menggugah selera, cocok untuk kebutuhan harian maupun acara spesial. Berikut beberapa menu andalan kami:<br><br>

            <strong>Nasi Kuning Ayam Goreng & Telur Bali</strong><br>
            Nasi kuning gurih disajikan dengan ayam goreng renyah dan telur bali pedas manis. Menu praktis dan mengenyangkan untuk bekal atau makan siang.<br>
            <strong>Harga: IDR 15.000</strong><br><br>

            <strong>Nasi Lemak</strong><br>
            Nasi lemak khas dengan aroma santan wangi, lengkap dengan lauk pelengkap seperti sambal, ikan teri, dan telur. Perpaduan rasa gurih dan pedas yang khas.<br>
            <strong>Harga: IDR 20.000</strong><br><br>

            <strong>Nasi Putih Tumpeng</strong><br>
            Tumpeng nasi putih ukuran sedang, cocok untuk perayaan keluarga atau syukuran. Dilengkapi berbagai lauk tradisional seperti ayam, telur, tempe, dan urap.<br>
            <strong>Harga: IDR 115.000</strong><br><br>

            <strong>Nasi Tumpeng Masakan Bali</strong><br>
            Tumpeng spesial dengan aneka lauk khas Bali seperti ayam betutu, telur pindang, lawar, dan sambal matah. Cocok untuk acara formal atau hidangan spesial.<br>
            <strong>Harga: IDR 140.000</strong>

        </div>
        <!-- Konten Tab: Ulasan -->
        <div class="tab-content" id="review" style="display: none;">
         <div class="review-item">
            <p><strong>Andini</strong> ⭐⭐⭐⭐⭐</p>
            <p>Nasi Kuning Ayam Goreng & Telur Balinya enak banget! Nasinya pulen, ayamnya krispi, dan telur Balinya pas rasa pedas-manisnya. Harga terjangkau pula.</p>
            </div>

            <div class="review-item">
            <p><strong>Rizal</strong> ⭐⭐⭐⭐☆</p>
            <p>Nasi Lemaknya harum dan gurih, sambalnya nampol! Cocok banget buat makan siang, cuma pengen lauknya lebih banyak aja.</p>
            </div>

            <div class="review-item">
            <p><strong>Melati</strong> ⭐⭐⭐⭐⭐</p>
            <p>Pesan Nasi Putih Tumpeng buat acara arisan, dan semua suka! Penyajiannya rapi dan rasanya autentik banget. Worth it!</p>
            </div>

            <div class="review-item">
            <p><strong>Bima</strong> ⭐⭐⭐⭐⭐</p>
            <p>Nasi Tumpeng Masakan Balinya mantap! Lauknya lengkap dan berasa khas Bali banget. Cocok buat acara formal, tampilannya juga menarik.</p>
            </div>



          <!-- Form Tambah Ulasan -->
          <div id="user-reviews"></div>
          <div class="add-review">
            <h4>Tambah Ulasan Anda</h4>
            <form id="review-form">
              <label for="review-name">Nama:</label><br />
              <input type="text" id="review-name" placeholder="Nama Anda" required /><br />

              <label for="review-rating">Rating:</label><br />
              <select id="review-rating" required>
                <option value="">Pilih Rating</option>
                <option value="5">⭐⭐⭐⭐⭐ - Sangat puas</option>
                <option value="4">⭐⭐⭐⭐ - Puas</option>
                <option value="3">⭐⭐⭐ - Cukup</option>
                <option value="2">⭐⭐ - Kurang</option>
                <option value="1">⭐ - Tidak suka</option>
              </select><br />

              <label for="review-message">Ulasan:</label><br />
              <textarea id="review-message" placeholder="Tulis ulasan Anda..." required></textarea><br />

              <button type="submit">Kirim</button>
            </form>
          </div>
        </div>

        <!-- Konten Tab: Pengiriman -->
        <div class="tab-content" id="shipping" style="display: none;">
          Praesent vestibulum congue tellus at fringilla. Curabitur vitae semper sem, eu convallis est. 
          Cras felis nunc commodo eu convallis vitae interdum non nisl. Maecenas ac est sit amet augue 
          pharetra convallis nec danos dui. Cras suscipit quam et turpis eleifend vitae malesuada magna 
          congue. Damus id ullamcorper neque. Sed vitae mi a mi pretium aliquet ac sed elit. Pellentesque 
          nulla eros accumsan quis justo at tincidunt lobortis denimes loremous. Suspendisse vestibulum 
          lectus in lectus volutpat, ut dapibus purus pulvinar. Vestibulum sit amet auctor ipsum.
        </div>
      </section>
    </div>
  </section>

    <!-- TOMBOL PESAN -->
    <p id="openOrderForm" style="
        cursor: pointer;
        font-weight: 600;
        font-size: 2 rem;
        color: white;
        background-color: orange;
        display: inline-block;
        padding: 26px 46px;
        border-radius: 6px;
        margin: 20px auto;
        transition: background-color 0.3s;
        text-align: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    ">Pesan</p>

    <!-- POPUP FORM PEMESANAN -->
        <div id="orderPopup" class="popup-overlay" style="display: none;" role="dialog" aria-modal="true">
                <div class="popup-content">
                    <h3>Pesan Sekarang - Multiple Item</h3>
                    
                    <button class="add-item-btn" onclick="addNewItem()">+ Tambah Item Baru</button>
                    
                    <div id="itemsContainer">
                        <!-- Items will be added here dynamically -->
                    </div>

                    <div class="order-summary">
                        <h4>Ringkasan Pesanan</h4>
                        <div id="summaryContent">
                            <div class="summary-item">
                                <span>Belum ada item</span>
                                <span>IDR 0</span>
                            </div>
                        </div>
                        <div class="summary-total">
                            <div style="display: flex; justify-content: space-between;">
                                <span>Total Keseluruhan:</span>
                                <span id="grandTotal">IDR 0</span>
                            </div>
                        </div>
                    </div>

                    <div class="popup-buttons">
                        <button type="button" onclick="checkout()">Pesan Sekarang</button>
                        <button type="button" onclick="closeOrderForm()">Batal</button>
                    </div>
                </div>
            </div>

    <!-- Confirmation Popup -->
    <div id="confirmationPopup" class="popup-overlay" style="display: none;" role="dialog" aria-modal="true">
        <div class="confirmation-popup">
            <h3>Konfirmasi Pesanan</h3>
            <div id="confirmationContent"></div>
            <div class="popup-buttons">
                <button type="button" onclick="confirmOrder()">Ya, Pesan</button>
                <button type="button" onclick="closeConfirmation()">Batal</button>
            </div>
        </div>
    </div>


    <!-- WHATSAPP FLOATING BUTTON -->
    <div class="fab-container">
        <div class="fab-menu" id="fabMenu">
            <div class="menufab">
                <a href="https://wa.me/6281230110217" target="_blank" class="fab-item">
                    <img src="Foto/icon/whatsapp hijau.png" alt="WA" class="fab-logo">
                    <p>Admin 1 - Bu Emiliah</p>
                </a>
            </div>
    
            <div class="menufab">
                <a href="https://wa.me/6281252548695" target="_blank" class="fab-item">
                    <img src="Foto/icon/whatsapp hijau.png" alt="WA" class="fab-logo">
                    <p>Admin 2 - Bu Rika</p> 
                </a>
            </div>
    
            <div class="menufab">
                <a href="https://wa.me/6282331257449" target="_blank" class="fab-item">
                    <img src="Foto/icon/whatsapp hijau.png" alt="WA" class="fab-logo">
                    <p>Admin 3 - Bu Indrayani</p>
                </a>
            </div>
            

            <div class="menufab">
                <button class="fab-item" id="openMap">
                    <img src="Foto/icon/maps.png" alt="Map" class="fab-logo">
                    <p>Map</p>
                </button>
            </div>
            
            <!-- Modal untuk Google Maps -->
            <div id="mapContainer" class="map-overlay">
                <div class="map-content">
                    <iframe 
                        id="mapFrame"
                        src=""
                        width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy">
                    </iframe>
                    <button class="close-map" id="closeMap">✖</button>
                </div>
            </div>
            
        </div>
    
        <div class="fab-button" onclick="toggleMenu()">
            <img src="Foto/icon/whatsapp.png" alt="WhatsApp" class="fab-icon">
        </div>
    </div>

    
    
    <!-- KONFIRMASI PESANAN -->
    <div id="popup" class="popup-overlay" style="display:none;" role="dialog" aria-modal="true">
      <div class="popup-content">
        <h3>Konfirmasi Pesanan</h3>
        <p id="popupText"></p>
        <div class="popup-buttons">
          <button type="button" onclick="confirmOrder()">Pesan</button>
          <button type="button" onclick="closePopup()">Batal</button>
        </div>
      </div>
    </div>

    <noscript><p style="color:red;">Mohon aktifkan JavaScript untuk menggunakan fitur pemesanan.</p></noscript>
  </main>

  <!-- SCRIPT -->
  <script src="fabmap.js"></script>
  <script>
const hargaMenu = {
  "Nasi Kuning Ayam Goreng & Telur Bali": 15000,
  "Nasi Lemak": 20000,
  "Nasi Putih Tumpeng": 115000,
  "Nasi Tumpeng Masakan Bali": 140000,
};



let itemCounter = 0;
let orderItems = [];

function addNewItem() {
  itemCounter++;
  const itemId = `item-${itemCounter}`;

  const itemHtml = `
    <div class="item-row" id="${itemId}">
      <button class="remove-item" onclick="removeItem('${itemId}')" title="Hapus item">×</button>
      
      <div class="form-group">
        <label>Pilih Menu:</label>
        <select onchange="updateItemPrice('${itemId}')">
          <option value="Nasi Kuning Ayam Goreng & Telur Bali">Nasi Kuning Ayam Goreng & Telur Bali - IDR 15,000</option>
            <option value="Nasi Lemak">Nasi Lemak - IDR 20,000</option>
            <option value="Nasi Putih Tumpeng">Nasi Putih Tumpeng - IDR 115,000</option>
            <option value="Nasi Tumpeng Masakan Bali">Nasi Tumpeng Masakan Bali - IDR 140,000</option>
        </select>
      </div>

      <div class="item-controls">
        <div class="form-group" style="flex: 1;">
          <label>Harga Satuan:</label>
          <input type="text" class="price-input" value="IDR 15.000" readonly />
        </div>
        
        <div class="form-group" style="flex: 1;">
          <label>Jumlah:</label>
          <div class="quantity-controls">
            <button class="quantity-btn" onclick="changeQuantity('${itemId}', -1)">-</button>
            <input type="number" class="quantity-input" value="1" min="1" onchange="updateItemTotal('${itemId}')">
            <button class="quantity-btn" onclick="changeQuantity('${itemId}', 1)">+</button>
          </div>
        </div>
        
        <div class="form-group" style="flex: 1;">
          <label>Subtotal:</label>
          <input type="text" class="total-input" value="IDR 0" readonly />
        </div>
      </div>
    </div>
  `;


    document.getElementById('itemsContainer').insertAdjacentHTML('beforeend', itemHtml);
    updateOrderSummary();
  }

  function removeItem(itemId) {
    const itemElement = document.getElementById(itemId);
    if (itemElement) {
      itemElement.remove();
      updateOrderSummary();
    }
  }

  function updateItemPrice(itemId) {
    const itemElement = document.getElementById(itemId);
    const select = itemElement.querySelector('select');
    const priceInput = itemElement.querySelector('.price-input');

    const selectedMenu = select.value;
    const price = hargaMenu[selectedMenu];

    priceInput.value = `IDR ${price.toLocaleString('id-ID')}`;
    updateItemTotal(itemId);
  }

  function changeQuantity(itemId, change) {
    const itemElement = document.getElementById(itemId);
    const quantityInput = itemElement.querySelector('.quantity-input');

    let currentQuantity = parseInt(quantityInput.value) || 1;
    let newQuantity = currentQuantity + change;
    if (newQuantity < 1) newQuantity = 1;

    quantityInput.value = newQuantity;
    updateItemTotal(itemId);
  }

  function updateItemTotal(itemId) {
    const itemElement = document.getElementById(itemId);
    const select = itemElement.querySelector('select');
    const quantityInput = itemElement.querySelector('.quantity-input');
    const totalInput = itemElement.querySelector('.total-input');

    const selectedMenu = select.value;
    const price = hargaMenu[selectedMenu];
    const quantity = parseInt(quantityInput.value) || 1;
    const total = price * quantity;

    totalInput.value = `IDR ${total.toLocaleString('id-ID')}`;
    updateOrderSummary();
  }

  function updateOrderSummary() {
    const items = document.querySelectorAll('.item-row');
    const summaryContent = document.getElementById('summaryContent');
    const grandTotalElement = document.getElementById('grandTotal');

    let grandTotal = 0;
    let summaryHtml = '';

    if (items.length === 0) {
      summaryHtml = '<div class="summary-item"><span>Belum ada item</span><span>IDR 0</span></div>';
    } else {
      items.forEach(item => {
        const select = item.querySelector('select');
        const quantityInput = item.querySelector('.quantity-input');
        const selectedMenu = select.value;
        const quantity = parseInt(quantityInput.value) || 1;
        const price = hargaMenu[selectedMenu];
        const subtotal = price * quantity;

        grandTotal += subtotal;
        summaryHtml += `
          <div class="summary-item">
            <span>${selectedMenu} x${quantity}</span>
            <span>IDR ${subtotal.toLocaleString('id-ID')}</span>
          </div>
        `;
      });
    }

    summaryContent.innerHTML = summaryHtml;
    grandTotalElement.textContent = `IDR ${grandTotal.toLocaleString('id-ID')}`;
  }

  function checkout() {
    const items = document.querySelectorAll('.item-row');

    if (items.length === 0) {
      alert('Tambahkan minimal 1 item untuk melanjutkan pemesanan.');
      return;
    }

    orderItems = [];
    let grandTotal = 0;

    items.forEach(item => {
      const select = item.querySelector('select');
      const quantityInput = item.querySelector('.quantity-input');
      const selectedMenu = select.value;
      const quantity = parseInt(quantityInput.value) || 1;
      const price = hargaMenu[selectedMenu];
      const subtotal = price * quantity;

      orderItems.push({
        menu: selectedMenu,
        quantity: quantity,
        price: price,
        subtotal: subtotal
      });

      grandTotal += subtotal;
    });

    let confirmationHtml = '<div class="order-details"><h4>Detail Pesanan:</h4>';
    orderItems.forEach(item => {
      confirmationHtml += `
        <p><strong>${item.menu}</strong><br>
        Jumlah: ${item.quantity} porsi @ IDR ${item.price.toLocaleString('id-ID')}<br>
        Subtotal: IDR ${item.subtotal.toLocaleString('id-ID')}</p>
      `;
    });
    confirmationHtml += `<hr><p><strong>Total Keseluruhan: IDR ${grandTotal.toLocaleString('id-ID')}</strong></p></div>`;

    document.getElementById('confirmationContent').innerHTML = confirmationHtml;
    document.getElementById('confirmationPopup').style.display = 'flex';
  }

  function confirmOrder() {
    // Pastikan orderItems terupdate sebelum confirm
    if (orderItems.length === 0) {
      alert('Tidak ada pesanan untuk dikonfirmasi.');
      return;
    }

    const orderData = {
      items: orderItems,
      total: orderItems.reduce((sum, item) => sum + item.subtotal, 0)
    };

    const params = new URLSearchParams({
      orderData: JSON.stringify(orderData)
    });

    window.location.href = `checkout.html?${params.toString()}`;
  }

  function closeConfirmation() {
    document.getElementById('confirmationPopup').style.display = 'none';
  }

  function closeOrderForm() {
    document.getElementById('orderPopup').style.display = 'none';
    document.getElementById('itemsContainer').innerHTML = '';
    itemCounter = 0;
    orderItems = [];
    updateOrderSummary();
  }

  document.getElementById("openOrderForm").onclick = function () {
    document.getElementById("orderPopup").style.display = "flex";
    if (document.querySelectorAll('.item-row').length === 0) {
      addNewItem();
    }
  };
</script>

  <script src="NK bebek.js"></script>
  <script src="tab-ulasan.js"></script>
<script src="fabmenu.js"></script>



</body>
</html>
